<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Geolocation API</title>
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script>
                window.addEventListener('DOMContentLoaded',
                    function() {
                        if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition(
                                function(pos) {
                                    var gmap = new google.maps.Map(
                                        document.querySelector('#gmap'),
                                        {
                                    zoom: 14,
                                    center: new google.maps.LatLng(
                                    pos.coords.latitude, pos.coords.longitude
                                ),
                                    mapTypeId: google.maps.MapTypeId.ROADMAP
                                }
                            );
                        },
                        function(err) {
                            var msgs = [
                                err.message,
                                'Permission denied.',
                                'Position unavailable.',
                                'Timeout.'
                            ];
                            alert(msgs[err.code]);
                        },
                        {
                            timeout : 10000,
                            maximumAge : 0,
                            enableHighAccuracy: true
                        }
                    );

                } else {
                    alert("Your browser doesn't support the Geolocation API.");
                }
            }, false
        );
    </script>
</head>
<body>
    <div id="gmap" style="width:400px; height:300px;"></div> 
</body>
</html>

